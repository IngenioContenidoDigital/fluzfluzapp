<!--
  Generated template for the InvitationThirdModalPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <ion-title text-center>INVITAR<button ion-button clear class="invisibleButton"></button></ion-title>
  </ion-navbar>
</ion-header>

<ion-content no-padding>
  <div class="ctn-background-white">
    <ion-grid>
      <div class="border-b" *ngFor="let item of customer">
        <ion-row>
          <ion-col col-2>
            <div class="image-person">
              <img src="{{item.img}}"  onerror="this.src='assets/img/user-red.png';">          
            </div>
          </ion-col>
          <ion-col col-4 class="border-b">
            <ion-label class="font-small text-dark font-semi-bold capitalize" (click)="openCustomer(item)">{{item.username}}</ion-label>
          </ion-col>
          <ion-col col-6 item-right class="border-b">
            <div class="ctn-btn-user" (click)="sendMessage(item)">MENSAJE</div>
            <div class="font-more-small text-gray-normal margin-t-5">Estado: <span class="status-confirm">{{item.status}}</span></div>
          </ion-col>
        </ion-row>
        <ion-row class="border-b">
          <ion-col class="font-more-small text-gray-normal">Fluz otorgados: {{item.points}}</ion-col>
          <ion-col col-3 class="font-more-small text-gray-normal">Nivel Fluz: {{item.level}}</ion-col>
          <ion-col class="font-more-small text-gray-normal">Fecha creaci√≥n: {{item.dateadd}}</ion-col>
        </ion-row>
        <div *ngIf="showInvitationForm !== item.id">
          <ion-row (click)="showInvitation(item)">
            <ion-col text-center>
              <ion-label class="font-small text-dark font-semi-bold ctn-btn-user">Invitar a nombre de {{item.username}}</ion-label>
            </ion-col>
          </ion-row>
        </div>
        <div *ngIf="showInvitationForm == item.id">
          <form class="form-invitation" [formGroup]="invitationForm">
            <ion-row>
              <ion-item col-6>
                <ion-label floating>Nombre</ion-label>
                <ion-input type="text" required (keyup)="validateInput($event)" [formControl]="invitationForm.controls['firtsname']"></ion-input>
              </ion-item>
              <ion-item col-6>
                <ion-label floating>Apellido</ion-label>
                <ion-input type="text" required (keyup)="validateInput($event)" [formControl]="invitationForm.controls['lastname']"></ion-input>
              </ion-item>
            </ion-row>
            <ion-row>
              <ion-item col-12>
                <ion-label floating>Correo</ion-label>
                <ion-input type="email" required (keyup)="validateInput($event)" [formControl]="invitationForm.controls['email']"></ion-input>
              </ion-item>
            </ion-row>
            <ion-row>
              <ion-col (click)="showInvitation(item)">
                <button ion-button color="primary" block>CANCELAR</button>
              </ion-col>
              <ion-col>
                <button ion-button color="primary" block [disabled]="!enabledInvitationButton" (click)="sendInvitation(item, invitationForm.value)">ACEPTAR</button>
              </ion-col>
            </ion-row>
          </form>
        </div>  
      </div>
    </ion-grid>
  </div>
 
</ion-content>
