<!--
  Generated template for the Bonus page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar hideBackButton="true">
    <ion-buttons left>
      <button ion-button icon-only>
        <i class='fluz-fluz-fluz'></i>
      </button>
    </ion-buttons>
    <ion-title text-center>CÓDIGOS</ion-title>
    <ion-buttons right>
      <button ion-button icon-only navPop><!--(click)="goTo()"-->
        <ion-icon name='ios-arrow-round-back'></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content no-padding class="background-soft">
  <ion-row class="border-b ctn-refine">
    <ion-col text-left class="title">{{bonusT}} Códigos total</ion-col>
    <ion-col text-right class="title-view-all font-semi-bold" *ngIf="showRefine">Refinar</ion-col>
  </ion-row>
  <ion-grid class="ctn-bonus"  *ngFor="let item of bonus">
    <ion-row class="static-height">
      <ion-col col-4 offset-4>
        <img src="{{manufacturer.m_img}}">        
      </ion-col>
    </ion-row>
    <div class="ctn-info-bonus">
      <ion-row>
        <ion-col col-6>
          <div *ngIf="item.used == 0">
            <i class="fluz-passcodeB green"></i>
            <ion-label class="text-spacer">Disponible</ion-label>
          </div>
          <div *ngIf="item.used == 1">
            <i class="fluz-passcodeB yellow"></i>
            <ion-label class="text-spacer">Usado</ion-label>
          </div>
          <div *ngIf="item.used == 2">
            <i class="fluz-passcodeB primary"></i>
            <ion-label class="text-spacer">Terminado</ion-label>
          </div>
        </ion-col>
        <ion-col col-6>
          <ion-label class="text-right font-small">${{item.formatPrice}}</ion-label>
        </ion-col>
      </ion-row>
      <ion-row class="border-b">
        <ion-col text-center>
          <ion-label text-center class="margin-v">{{item.product_name}}</ion-label>
        </ion-col>
      </ion-row>
      <ion-row class="border-b">
        <ion-col>
          <div text-left>
            <ion-label class="font-more-small text-gray-normal">Compra:</ion-label>
            <ion-label class="font-small green" *ngIf="item.gift == true">Obsequio</ion-label>
            <ion-label class="font-small" *ngIf="item.gift !== true">{{item.date}}</ion-label>
          </div>
        </ion-col>
        <ion-col *ngIf="item.online_only == 1">
          <div text-center>
            <ion-label class="font-more-small text-gray-normal" *ngIf="item.is_virtual == 1">Tipo de bono:</ion-label>            
            <ion-label class="font-small text-primary" *ngIf="item.is_virtual == 1">Solo Online</ion-label>
          </div>
        </ion-col>
        <ion-col>
          <div text-right>
            <ion-label class="font-more-small text-gray-normal">Vencimiento</ion-label>
            <ion-label class="font-small">{{item.expiration}}</ion-label>
          </div>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col (click)="copyToClipboard(item.card_code)">
          <div text-center>
            <ion-label class="font-normal">{{item.card_code}}</ion-label>            
            <ion-label class="font-more-small text-primary">Toca para copiar</ion-label>            
          </div>
        </ion-col>
      </ion-row>
      <ion-label class="text-right text-primary" (click)="toggleDetails(item)">
        Ver 
        <span *ngIf="showDetails == item.id_product_code">menos</span>
        <span *ngIf="showDetails != item.id_product_code">mas</span>
      </ion-label>
    </div>
            

    <div class="ctn-details" *ngIf="showDetails == item.id_product_code" [@slideIn]>
      <ion-row>
        <ion-col text-center *ngIf="item.used < 1">
          <button ion-button color="primary" (click)="saveStatusBonus(item, 1);">Usada</button>
        </ion-col>
        <ion-col text-center *ngIf="item.used < 2">
          <button ion-button color="primary" (click)="saveStatusBonus(item, 2);">Terminada</button>
        </ion-col>
      </ion-row>
      <div class="ctn-accordeon-title">
        <ion-row>
          <ion-label (click)="toggleDescription(item,'1')">Instrucciones</ion-label>
        </ion-row>
      </div>
      <div class="ctn-accordeon-details">
        <ion-list *ngIf="item.showDescription" [@slideIn]>
          <ion-item>
            <div class="inner-html" [innerHTML]="item.description_short"></div>
            <!--<span class="large" [inner-html]="item.description_short"></span>-->
          </ion-item>
        </ion-list>
      </div>
      <div class="ctn-accordeon-title" *ngIf="item.online_only == 0">
        <ion-row>
          <ion-label (click)="toggleDescription(item,'2')">Direcciones</ion-label>
        </ion-row>
      </div>
      <div class="ctn-accordeon-details">
        <ion-list *ngIf="item.showDirections" [@slideIn]>
          <!--<div #map id="map"></div>-->
          <div class="ctn-directions">
            <ion-scroll scrollY="true" style="width: 100%; height: 100%;">
              <div *ngFor="let item of directions" class="margin-5 border-b">
                <ion-label class="font-semi-bold text-dark margin-5">{{item.firstname}}</ion-label>
                <ion-label class="font-semi-bold text-gray-normal margin-5">{{item.address1}}</ion-label>
                <ion-label class="font-semi-bold text-gray-normal margin-5">{{item.city}}</ion-label>
              </div>
            </ion-scroll>
          </div>
        </ion-list>
      </div>
      <div class="ctn-accordeon-title">
        <ion-row>
          <ion-label (click)="toggleDescription(item,'3')">Terminos</ion-label>
        </ion-row>
      </div>
      <div class="ctn-accordeon-details">
        <ion-list *ngIf="item.showTerms" [@slideIn]>
          <ion-item>
            <div class="inner-html" [innerHTML]="item.description"></div>
          </ion-item>
        </ion-list>
      </div>
    </div>
  </ion-grid>
  
</ion-content>
