<!--
  Generated template for the ProductModalPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <!--  <ion-navbar>
    <ion-buttons left (click)="dismiss()">
      <button ion-button icon-only>
        <ion-icon name='close'></ion-icon>
      </button>
    </ion-buttons>
    <ion-title text-center>EN ESTA UBICACIÓN<button ion-button clear class="invisibleButton"></button></ion-title>
  </ion-navbar>-->
  
  <page-header (updateCountCart)='updateCountCart($event)' [showProductChildBtn]="true" #header></page-header>
</ion-header>

<ion-content no-padding>
  
  <!--Productos en el mapa-->
  <div *ngIf="productMap.total == 1">
    
    
    <!--Caso 2-->
    <div *ngIf="productFather.total > 1" class="product-father-page">
      <div text-center>
        <br>
        <ion-label class="font-normal text-dark font-semi-bold">{{manufacturer.m_name}}</ion-label>
        <div>
          <img class="image-manufacturer" src="{{manufacturer.image_manufacturer}}">
        </div>
      </div>
      <br>
      <ion-grid>
        <ion-row *ngFor="let item of productFather.result" (click)="openItemChild(item)">
          <ion-col>
            <div class="image-product">
              <img src="{{manufacturer.image_manufacturer}}">          
              <!--<img src="https://s3.amazonaws.com/imagenes-fluzfluz/m/24.jpg">-->          
            </div>
          </ion-col>
          <ion-col col-6>
            <ion-label class="font-small text-gray-dark font-semi-bold">{{item.p_name}}</ion-label>
            <ion-label class="font-extra-small text-gray-normal font-semi-bold">$ {{item.prices}} COP</ion-label>
          </ion-col>
          <ion-col>
            <ion-label class="font-small text-gray-dark font-semi-bold" text-right>Gana Hasta</ion-label>
            <ion-label class="font-small text-primary font-semi-bold" text-right>{{item.points/2}} FLUZ</ion-label>
          </ion-col>
        </ion-row>
      </ion-grid>
    </div>
    <!--Cierro caso 2-->
    
    <!--Caso 3-->
    <div *ngIf="showChild == true" class="product-child-page">
      <div text-center class="ctn-title-gray">
        <ion-label class="font-small text-dark font-semi-bold name">{{productFather.p_name}}</ion-label>
        <div>
          <img class="image-manufacturer" src="{{manufacturer.image_manufacturer}}">
        </div>
      </div>
      <ion-grid class="negative-margin">
        <ion-row class="padding-h-5">
          <ion-col>
            <ion-label text-left class="font-small text-dark font-semi-bold description">Descripción +</ion-label>
          </ion-col>
          <ion-col>
            <ion-label text-right class="font-small text-gray-normal font-semi-bold online">Solamente<br><span class="text-dark">online</span></ion-label>
          </ion-col>
        </ion-row>
      </ion-grid>
      <ion-grid class="font-extra-small text-dark font-semi-bold">
        <ion-row class="padding-h-5 table-titles">
          <ion-col col-3 text-left>VALOR EN TIENDA</ion-col>
          <ion-col text-center>FLUZ A RECIBIR</ion-col>
          <ion-col text-center>PRECIO EN FLUZ</ion-col>
          <ion-col col-2 text-right></ion-col>
        </ion-row>
        <div  *ngFor="let item of productChild.result" class="border-b">
          <ion-row class="padding-h-5 margin-t-5 font-more-small" align-items-center>
            <ion-col col-3 text-left>
              {{item.type_currency}} ${{item.c_price_shop_format}}
              <div *ngIf="item.c_price_shop_format != item.c_price">
                <ion-label class="ctn-price-in-shop text-primary font-extra-small text-discount">COP PRECIO</ion-label>
                <!--<ion-label class="ctn-price-in-shop text-primary margin-v">${{item.c_price_shop_format}} <span style='text-decoration:line-through'>${{item.c_price}}</span></ion-label>-->  
                <ion-label class="ctn-price-in-shop text-primary margin-v" *ngIf="item.type_currency != 'USD'">${{item.c_price_shop_format}}</ion-label>  
                <ion-label class="ctn-price-in-shop text-primary margin-v" *ngIf="item.type_currency == 'USD'">${{item.c_price}}</ion-label>  
              </div>
            </ion-col>
            <ion-col col-3 text-center class="text-green">+{{item.c_win_fluz}}</ion-col>
            <ion-col col-3 text-center>-{{item.c_price_fluz}}</ion-col>
            <ion-col col-3 class="ctn-btn-buy">
              <button ion-button item-right  color="primary" class="font-extra-small" (click)="addToCart(item.c_id_product)">COMPRAR</button>
            </ion-col>
          </ion-row>
        </div>
      </ion-grid>
      <div no-padding>
        <ion-segment [(ngModel)]="inform">
          <ion-segment-button value="instructions" no-padding>
            Instrucciones Bonos
          </ion-segment-button>
          <ion-segment-button value="terms" no-padding>
            Terminos y Condiciones
          </ion-segment-button>
        </ion-segment>
      </div>
      <div [ngSwitch]="inform">
        <ion-list *ngSwitchCase="'instructions'">
          <ion-item>
            <br>
            <div class="inner-html" [innerHTML] = "'<p>' + intructions + '</p>'"></div>
            <!--{{intructions}}-->       
          </ion-item>
        </ion-list>

        <ion-list *ngSwitchCase="'terms'">
          <ion-item>
            <br>
            <div class="inner-html" [innerHTML] = "'<p>' + terms + '</p>'"></div>
          </ion-item>
        </ion-list>
      </div>
    </div>
    <!--Cierro caso 3-->
    <div class="spacer-25"></div>
    <div class="spacer-25"></div>
  </div>
  
  
  
  <!--Caso 1-->
  <div *ngIf="productMap.total > 1" class="search-page">
    <ion-grid>
      <ion-row  *ngFor="let item of productMap.result" (click)="openItem(item)">
        <ion-col>
          <div class="image-product">
            <img src="{{item.image_manufacturer}}">        
          </div>
        </ion-col>
        <ion-col col-6>
          <ion-label class="font-small text-gray-dark font-semi-bold">{{item.m_name}}</ion-label>
          <ion-label class="font-extra-small text-gray-normal font-semi-bold">${{item.prices}} COP</ion-label>
        </ion-col>
        <ion-col>
          <ion-label class="font-small text-gray-dark font-semi-bold" text-right>Gana Hasta</ion-label>
          <ion-label class="font-small text-primary font-semi-bold" text-right>{{item.m_points/2}} FLUZ</ion-label>
        </ion-col>
      </ion-row>
    </ion-grid>  
  </div>
  <!--Cierro caso 1-->
  <div class="spacer-25"></div>
  <div class="spacer-25"></div>
</ion-content>

<ion-footer *ngIf="infoFooter.number > 0 && showChild == true" [@slideIn]>
  <ion-toolbar color="primary" (click)="openCart()">
    <ion-row align-items-center>
      <ion-col col-3>
        <div class="image-product">
          <img src="{{infoFooter.img}}">
        </div>
      </ion-col>
      <ion-col col-5>
        <ion-label class="font-small text-white font-semi-bold margin-2">{{infoFooter.number}} Códigos</ion-label>
        <ion-label class="font-more-small text-white font-semi-bold margin-2 wrap">Subtotal: {{infoFooter.subtotal}}</ion-label>
      </ion-col>
      <ion-col col-4>
        <div class="ctn-btn-footer text-right">CHECKOUT</div>
      </ion-col>
    </ion-row>
  </ion-toolbar>
</ion-footer>