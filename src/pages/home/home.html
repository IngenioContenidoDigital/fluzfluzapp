<ion-header>
  <page-header (updateCountCart)='updateCountCart($event)'></page-header>
</ion-header>

<ion-content no-padding>
  <div *ngIf="notificationBar.alert !== 2">
    <div [ngClass]="( notificationBar.alert >= 3 ) ? 'ctn-notification background-primary' : ( notificationBar.alert == 2 ) ?  'ctn-notification background-green' : 'ctn-notification background-dorado' " *ngIf="notificationBar.setVisible===true" [@slideIn]>
      <ion-row>
        <ion-col col-1></ion-col>
        <ion-col col-10 (click)="openReactiveAccount(notificationBar.alert)">
          <ion-label text-wrap text-center class="font-more-small">
            {{notificationBar.text}}
            <strong *ngIf="notificationBar.alert == 4">¿Cómo la Reactivo?</strong>
          </ion-label>
        </ion-col>
        <ion-col col-1 (click)="closeNotification()">
          <ion-icon name="md-close-circle" ></ion-icon>
        </ion-col>
      </ion-row>
    </div>
  </div>
  <div class="ctn-notification background-primary" *ngIf="notificationBar.profile_complete < 100 && profileBar == true" [@slideIn]>
    <ion-row>
      <ion-col col-1></ion-col>
      <ion-col col-10>
        <ion-label text-wrap text-center class="font-more-small">Tu perfil de usuario está completado en un {{notificationBar.profile_complete}}%</ion-label>
      </ion-col>
      <ion-col col-1 (click)="closeProfile()">
        <ion-icon name="md-close-circle" ></ion-icon>
      </ion-col>
    </ion-row>
  </div>
  <div class="ctn-user-data border-primary" *ngIf="showHomeUserData===true">
    <ion-grid>
      <ion-row>
        <ion-col col text-center>
          <!--<div class="ctn-float-img">-->
            <img src="{{userData.image}}" onerror="this.src='assets/img/user-red.png';">
          <!--</div>-->
          <ion-label class="text-gray-normal">
            Hola, {{userData.userName}}!
          </ion-label>
        </ion-col>
        <ion-col col-4 *ngIf="lastedFluz">
          <ion-label class="text-primary">
            {{userData.fluzLasted}}
          </ion-label>          
          <ion-label class="text-gray-normal">
            Fluz últimos 30 días
          </ion-label>
        </ion-col>
        <ion-col col>
          <ion-label class="text-dark">
            +{{userData.fluzTotal}}
          </ion-label>
          <ion-label class="text-gray-normal">
            Fluz totales
          </ion-label>              
        </ion-col>
        <ion-col col (click)="pushNewUser()">
          <ion-label class="text-dark">
            +{{userData.winnerMembers}}
          </ion-label>
          <ion-label class="text-gray-normal">
            Fluzzers
          </ion-label>
        </ion-col>
      </ion-row>
    </ion-grid>
      
  </div>
  
  <div class="card-background-page">
    <ion-slides [autoplay]="4000" [loop]="true"  [speed]="300" [pager]="true" *ngIf="countbannerData > 1">
      <ion-slide *ngFor="let slide of bannerData" (click)="openBanner(slide)">
        <ion-card>
          <img src="{{slide.b_img}}"/>            
          <div class="card-title"[innerHTML] = "slide.b_name"></div>
        </ion-card>        
      </ion-slide>
    </ion-slides>
  </div>
  
  <ion-card class="ctn-category" *ngFor="let category of categoryFatherData">
    <ion-card-header>
      <ion-row>
        <ion-col text-left class="title">{{category.name}}</ion-col>
        <ion-col text-right class="title-view-all font-semi-bold" (click)="openCategoryById(category)">Ver Todo</ion-col>
      </ion-row>
    </ion-card-header>
    <ion-card-content>
      <ion-slides [loop]="true" [slidesPerView]="3" [spaceBetween]="10" [speed]="300">
        <ion-slide *ngFor="let products of category.products" (click)="openProductChild(products)">
          <div class="ctn-product-category-img">
            <img src="{{products.image}}">
          </div>
          <ion-label class="title-product">{{products.name}}</ion-label>
          <p class="text-product">Gana hasta {{products.pf_points}} Fluz</p>
        </ion-slide>
      </ion-slides>
    </ion-card-content>
  </ion-card>
<!--  
  <ion-grid class="ctn-ctgry-final">
    <ion-row>
      <ion-col text-left class="title-ctgry">CERCA DE TÍ</ion-col>
      <ion-col text-right class="title-view-all font-semi-bold" (click)="openViewAllCategories()">Ver Todo</ion-col>
    </ion-row>
  </ion-grid>
  <div #map id="map" (markerClick)="updateDiv()"></div>
    -->
  <ion-grid class="ctn-ctgry-final">
    <ion-row>
      <ion-col text-left class="title-ctgry">CATEGORIAS</ion-col>
      <ion-col text-right class="title-view-all font-semi-bold" (click)="openViewAllCategories()">Ver Todo</ion-col>
    </ion-row>
    <div *ngIf="homeCategories == 1">
      <div class="card-background-page" *ngFor="let category of categoryWithOutFatherData">
        <ion-card (click)="openCategoryById(category)">
          <img src="{{category.img_category}}" onerror="this.style.display='none'"/>            
          <div class="card-title-s">{{category.name}}</div>
        </ion-card>
      </div>
    </div>
    <ion-row *ngIf="homeCategories == 2">
      <ion-col col-6 *ngFor="let categories of categoryWithOutFatherData">
        <ion-card (click)="openCategoryById(categories)">
          <div class="ctn-category-img" [ngStyle]="{'background-image':'url(' + categories.img_category + ')'}">
          </div>
          <ion-card-title class="title-ctgry">
            {{categories.name}}
          </ion-card-title>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>
  <div class="spacer-25"></div>
  <div class="spacer-25"></div>
</ion-content>
